[
  {
    "id": "1ada501ef33781488102c572f2478d26",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "今回は、データベースにおける「マイグレーション」について説明します。",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781e9ab74dbeb33243e4c",
    "type": "heading_2",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションとは？",
          "href": null
        }
      ]
    },
    "order": 1
  },
  {
    "id": "1ada501ef33781ff82c6c35dca9a3e48",
    "type": "divider",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": "_",
    "order": 2
  },
  {
    "id": "1ada501ef3378131a592f0353757b1e5",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "概要",
          "href": null
        }
      ]
    },
    "order": 3
  },
  {
    "id": "1ada501ef33781f5b9ffe0ea9a0673ec",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "データベースにおける「マイグレーション（migration）」とは、データベースのスキーマ（構造）を変更する処理を指します。例えば、新しいテーブルの追加、既存のテーブルへのカラムの追加や削除、データ型の変更など。要するに、既存のデータベースの構造を後から変更したい時に、いつでも変更できるような仕組みがマイグレーションです。",
          "href": null
        }
      ]
    },
    "order": 4
  },
  {
    "id": "1ada501ef33781998e5bd20d2aeeb66b",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションの流れ",
          "href": null
        }
      ]
    },
    "order": 5
  },
  {
    "id": "1ada501ef337817a8c08fc6233214b20",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "スキーマ（構造）の変更",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": ": 開発者が新しい機能を実装するためにデータベースのスキーマを変更します（例えば、新しいカラムを追加するなど）。",
          "href": null
        }
      ]
    },
    "order": 6
  },
  {
    "id": "1ada501ef33781c9b319ce01b1c246e7",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "変更内容を記録するファイルの作成",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": ": 変更内容を記録するファイル（マイグレーションファイル）を作成します。このファイルには、データベースの変更方法が記述されています。",
          "href": null
        }
      ]
    },
    "order": 7
  },
  {
    "id": "1ada501ef337811f9019f4cd4fc9587f",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションの適用",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": ": マイグレーションツールを使用して、変更内容を実際のデータベースに適用します。これにより、データベースが新しいスキーマ（構造）に更新されます。",
          "href": null
        }
      ]
    },
    "order": 8
  },
  {
    "id": "1ada501ef33781d18f91cee6636df277",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションのメリット",
          "href": null
        }
      ]
    },
    "order": 9
  },
  {
    "id": "1ada501ef337811a9808c3c015ccf7b7",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "データベースの構造をいつでも簡単に変更できる",
          "href": null
        }
      ]
    },
    "order": 10
  },
  {
    "id": "1ada501ef337810b918cd792295685f9",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "データベースの中のデータを引き継ぎつつ構造を変更できる",
          "href": null
        }
      ]
    },
    "order": 11
  },
  {
    "id": "1ada501ef33781e09d45f122205cb362",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "データベースの更新履歴が残る",
          "href": null
        }
      ]
    },
    "order": 12
  },
  {
    "id": "1ada501ef33781c5a234d6afe6d6c016",
    "type": "heading_2",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションの仕組みを作ろう",
          "href": null
        }
      ]
    },
    "order": 13
  },
  {
    "id": "1ada501ef33781a0b459fb4b4b305ebe",
    "type": "divider",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": "_",
    "order": 14
  },
  {
    "id": "1ada501ef3378104beefea4ce666ca27",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "さて、ここから実際にPythonとsqlite3を用いてマイグレーションをいつでも実行できる仕組みを作ってみましょう。",
          "href": null
        }
      ]
    },
    "order": 15
  },
  {
    "id": "1ada501ef33781eabdf4f0ac8f3294c9",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "フォルダ構造",
          "href": null
        }
      ]
    },
    "order": 16
  },
  {
    "id": "1ada501ef3378199b360cad5afb242e0",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "まず、今回マイグレーションの仕組みを作成するために以下のフォルダ構造を用意してください。",
          "href": null
        }
      ]
    },
    "order": 17
  },
  {
    "id": "1ada501ef33781a9a284ef911800bcc5",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/folder_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "フォルダ構造",
          "href": null
        }
      ]
    },
    "order": 18
  },
  {
    "id": "1ada501ef337812d8d5edefd0c0657b0",
    "type": "image",
    "parentId": "1ada501ef33781a9a284ef911800bcc5",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "parent": [],
      "url": "https://raw.githubusercontent.com/Ryukoku-Horizon/notion2atlas/main/public/assets/1ada501ef33781aca7f5efdaf65ef9e7/1ada501ef337812d8d5edefd0c0657b0.png"
    },
    "order": 0
  },
  {
    "id": "1ada501ef337816abd59ef0e0d6450f5",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migration_test/ ",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "（今回のルート[根っこの]フォルダ）",
          "href": null
        }
      ]
    },
    "order": 19
  },
  {
    "id": "1ada501ef3378116b2a9c01f2fdfad87",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef337816abd59ef0e0d6450f5",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " （マイグレーションを適用するための実行用ファイル）",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781b9a45ee458a0655773",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef337816abd59ef0e0d6450f5",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations/",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "　（マイグレーションファイルを格納するフォルダ）",
          "href": null
        }
      ]
    },
    "order": 1
  },
  {
    "id": "1ada501ef3378102b9caecbfa97f7ac2",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef337816abd59ef0e0d6450f5",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "create_migrations_table.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "　（マイグレーションテーブルを作成するスクリプト）",
          "href": null
        }
      ]
    },
    "order": 2
  },
  {
    "id": "1ada501ef3378134ac7ede1aa2475758",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef337816abd59ef0e0d6450f5",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "TEST.db",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "　（データベースファイル）",
          "href": null
        }
      ]
    },
    "order": 3
  },
  {
    "id": "1ada501ef33781ed9c74c72520f27318",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "データベースとマイグレーションの設定",
          "href": null
        }
      ]
    },
    "order": 20
  },
  {
    "id": "1ada501ef33781d6baadd1d1944d819f",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "まず、適用済みのマイグレーションを保存するために、データベースに",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルを作成します。",
          "href": null
        }
      ]
    },
    "order": 21
  },
  {
    "id": "1ada501ef33781598382ef5bb2ea7c80",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/table_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブル",
          "href": null
        }
      ]
    },
    "order": 22
  },
  {
    "id": "1ada501ef3378165ab77de78a85692fa",
    "type": "table",
    "parentId": "1ada501ef33781598382ef5bb2ea7c80",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "has_column_header": false,
      "has_row_header": false,
      "table_width": 4
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781ad9c96d4a7c4aa1abc",
    "type": "table_row",
    "parentId": "1ada501ef3378165ab77de78a85692fa",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": [
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "カラム名",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "id",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migration_name",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "applied_at",
          "href": null
        }
      ]
    ],
    "order": 0
  },
  {
    "id": "1ada501ef33781eba62cf357d7a5e0b0",
    "type": "table_row",
    "parentId": "1ada501ef3378165ab77de78a85692fa",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": [
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "属性",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "INTEGER PRIMARY KEY AUTOINCREMENT",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "TEXT UNIQUE",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "TIMESTAMP DEFAULT CURRENT_TIMESTAMP",
          "href": null
        }
      ]
    ],
    "order": 1
  },
  {
    "id": "1ada501ef3378150848de65f2460df66",
    "type": "table_row",
    "parentId": "1ada501ef3378165ab77de78a85692fa",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": [
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "保存する値",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "一意の値",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションの名前",
          "href": null
        }
      ],
      [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "いつ適用されたか",
          "href": null
        }
      ]
    ],
    "order": 2
  },
  {
    "id": "1ada501ef3378125bafcd0ac9f7b6d3a",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "create_migrations_table.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " に、以下のコードを記述してください。",
          "href": null
        }
      ]
    },
    "order": 23
  },
  {
    "id": "1ada501ef33781738027f53c55d91428",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/code_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "create_migrations_table.py",
          "href": null
        }
      ]
    },
    "order": 24
  },
  {
    "id": "1ada501ef33781eba859fbd0148a2f1c",
    "type": "code",
    "parentId": "1ada501ef33781738027f53c55d91428",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "caption": [],
      "language": "python",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "import sqlite3\n\ndef create_migrations_table(dbname):\n\tconn = sqlite3.connect(dbname)\n\tcur = conn.cursor()\n\tcur.execute('''\n\t\t\tCREATE TABLE IF NOT EXISTS migrations (\n\t\t\tid INTEGER PRIMARY KEY AUTOINCREMENT,\n\t\t\tmigration_name TEXT UNIQUE,\n\t\t\tapplied_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)\n\t''')\n\tconn.commit()\n\t\n\tcur.close()\n\tconn.close()",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef337812fb22cef0cabd44d26",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルを作成するSQL文が、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "CREATE TABLE IF NOT EXISTS テーブル名",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "となっています。",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "IF NOT EXISTS",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "がない場合、既にテーブルが作成されていれば、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "table already exists",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "というエラーが発生します。既に存在するテーブルを作成しようとするとエラーが発生するわけです。",
          "href": null
        }
      ]
    },
    "order": 25
  },
  {
    "id": "1ada501ef33781349970d827b977af0c",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "したがって、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "IF NOT EXISTS",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "があることで、テーブルが作成済みでない場合のみテーブルを作成する処理が行われ、エラーを回避できます。",
          "href": null
        }
      ]
    },
    "order": 26
  },
  {
    "id": "1ada501ef33781439189dc2cffef3703",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションファイルの作成",
          "href": null
        }
      ]
    },
    "order": 27
  },
  {
    "id": "1ada501ef33781d5bb23ca8631828777",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "最初の",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルの作成以外で、データベースの構造を変更したい場合は、全てマイグレーションファイルに記述することが望ましいです。（なぜなら、そうすると全ての変更履歴が残るからです）",
          "href": null
        }
      ]
    },
    "order": 28
  },
  {
    "id": "1ada501ef33781f2bbe0fab06708f1a5",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションファイルを ",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " フォルダ内に配置します。",
          "href": null
        }
      ]
    },
    "order": 29
  },
  {
    "id": "1ada501ef33781e9947af565f23e3605",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "ファイルの名前",
          "href": null
        }
      ]
    },
    "order": 30
  },
  {
    "id": "1ada501ef33781a39104d6ce39f26d05",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションファイルの名前は一貫性を持たせることが望まれます。\n次のような名前にすることが一般的です：",
          "href": null
        }
      ]
    },
    "order": 31
  },
  {
    "id": "1ada501ef337813ea1b4f1bc7f9b16c1",
    "type": "bulleted_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "連番_変更内容",
          "href": null
        }
      ]
    },
    "order": 32
  },
  {
    "id": "1ada501ef33781fdbb22e0135a880357",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "例えば、最初のスキーマ（構造）を規定する",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "001_initial_schema.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "や、emailカラムを追加する",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "002_add_email_column.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "や、userテーブルを追加する",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "003_add_user_table.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " など。",
          "href": null
        }
      ]
    },
    "order": 33
  },
  {
    "id": "1ada501ef3378172ad39ebc9b4c240e7",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "ファイルの名前にこのような規則を持たせることで、どの変更をどの順番で行ったのかがいつでも確認できるようになります。",
          "href": null
        }
      ]
    },
    "order": 34
  },
  {
    "id": "1ada501ef33781c5961afbcf05a293af",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "ファイルの内容",
          "href": null
        }
      ]
    },
    "order": 35
  },
  {
    "id": "1ada501ef337812ea6efc3e2a3a1b5c9",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションファイルの内容は、データベースのスキーマ（構造）を変更するSQL文を実行する処理となります。",
          "href": null
        }
      ]
    },
    "order": 36
  },
  {
    "id": "1ada501ef33781ccab7dd12814626bd3",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "例えば、新しいテーブルの作成、カラムの追加、カラムの削除、など。",
          "href": null
        }
      ]
    },
    "order": 37
  },
  {
    "id": "1ada501ef33781ed81abef442d09e991",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "ファイルの作成",
          "href": null
        }
      ]
    },
    "order": 38
  },
  {
    "id": "1ada501ef33781339033dd16799dd6e6",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "今回は、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " フォルダ内に",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "001_initial_schema.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "と",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "002_add_email_column.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "を作ってみましょう。",
          "href": null
        }
      ]
    },
    "order": 39
  },
  {
    "id": "1ada501ef33781608e53efb291c31b3e",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/folder_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "フォルダ構造",
          "href": null
        }
      ]
    },
    "order": 40
  },
  {
    "id": "1ada501ef33781298673dd8c138eeae4",
    "type": "image",
    "parentId": "1ada501ef33781608e53efb291c31b3e",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "parent": [],
      "url": "https://raw.githubusercontent.com/Ryukoku-Horizon/notion2atlas/main/public/assets/1ada501ef33781aca7f5efdaf65ef9e7/1ada501ef33781298673dd8c138eeae4.png"
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781f18305f073e41d0ee2",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "以下に二つのファイルの内容を載せます。",
          "href": null
        }
      ]
    },
    "order": 41
  },
  {
    "id": "1ada501ef337812a88fbd3c3c2837c8c",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/code_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "001_initial_schema.py",
          "href": null
        }
      ]
    },
    "order": 42
  },
  {
    "id": "1ada501ef33781499c80d3a7a53653ec",
    "type": "code",
    "parentId": "1ada501ef337812a88fbd3c3c2837c8c",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "caption": [],
      "language": "python",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "import sqlite3\n\ndbname = 'TEST.db'\n\ndef apply_migration():\n  conn = sqlite3.connect(dbname)\n  cur = conn.cursor()\n  cur.execute('''\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      name TEXT NOT NULL)\n  ''')\n  conn.commit()\n  \n  cur.close()\n  conn.close()",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781b0841cfcc73300bd23",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/code_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "002_add_email_column.py",
          "href": null
        }
      ]
    },
    "order": 43
  },
  {
    "id": "1ada501ef3378195b379cbff7f528db2",
    "type": "code",
    "parentId": "1ada501ef33781b0841cfcc73300bd23",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "caption": [],
      "language": "python",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "import sqlite3\n\ndbname = 'TEST.db'\n\ndef apply_migration():\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n    cur.execute('''\n        ALTER TABLE users ADD COLUMN email TEXT\n    ''')\n    conn.commit()\n    \n    cur.close()\n    conn.close()",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781508b69eafdd8664b27",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "001_initial_schema.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "では、usersテーブルを新たに作成する処理を記述しています。",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "002_add_email_column.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "では、usersテーブルにemailカラムを追加する処理を記述しています。",
          "href": null
        }
      ]
    },
    "order": 44
  },
  {
    "id": "1ada501ef337810d9df0c3a89ddeee67",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "上記で、今回のマイグレーションファイルができました。",
          "href": null
        }
      ]
    },
    "order": 45
  },
  {
    "id": "1ada501ef33781d3b66ad8ed480a0a26",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": true,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "マイグレーションの適用",
          "href": null
        }
      ]
    },
    "order": 46
  },
  {
    "id": "1ada501ef33781f891aacc84f9c63321",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "すべてのマイグレーションファイルを適用するロジックを作成します。",
          "href": null
        }
      ]
    },
    "order": 47
  },
  {
    "id": "1ada501ef33781329e86cc0041df8b47",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "定義する関数は二つです。",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "get_applied_migrations関数",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "と",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations関数",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "です。",
          "href": null
        }
      ]
    },
    "order": 48
  },
  {
    "id": "1ada501ef33781d3aef7d63510a09c5d",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "get_applied_migrations関数",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "：",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " テーブルを使って、すでに適用されたマイグレーションを取得する。",
          "href": null
        }
      ]
    },
    "order": 49
  },
  {
    "id": "1ada501ef33781d78446f2e3a966e0ba",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations関数",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "：",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "get_applied_migrations関数",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "を使って適用済みのマイグレーションをスキップし、適用されていないマイグレーションファイルを順番に読み込んで実行する。最後に、適用したマイグレーションを",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルに記録する。",
          "href": null
        }
      ]
    },
    "order": 50
  },
  {
    "id": "1ada501ef33781d896b4dceba99709f1",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/code_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations.py",
          "href": null
        }
      ]
    },
    "order": 51
  },
  {
    "id": "1ada501ef337819bb30ef80a15405ced",
    "type": "code",
    "parentId": "1ada501ef33781d896b4dceba99709f1",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "caption": [],
      "language": "python",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "import os\nimport sqlite3\nfrom create_migrations_table import create_migrations_table\n\n# マイグレーションスクリプトのディレクトリ\nmigration_dir = 'migrations/'\ndbname = 'TEST.db'\n\ndef get_applied_migrations():\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n    cur.execute('SELECT migration_name FROM migrations')\n    applied_migrations = [row[0] for row in cur.fetchall()]\n    conn.close()\n    return applied_migrations\n\ndef apply_migrations():\n    create_migrations_table(dbname)\n    # 適用済みのマイグレーションを取得\n    applied_migrations = get_applied_migrations()\n\n    # マイグレーションファイルを読み込む\n    migration_files = os.listdir(migration_dir)\n    print(migration_files)\n\n    conn = sqlite3.connect(dbname)\n    cur = conn.cursor()\n\n    for migration_file in migration_files:\n        if migration_file not in applied_migrations:\n            module_name = migration_file[:-3]  # 拡張子「.py」を削除\n            # マイグレーションスクリプトをインポートして実行\n            migration_module = __import__(f'migrations.{module_name}', fromlist=['apply_migration'])\n            migration_module.apply_migration()\n\n            # マイグレーションが適用されたことを記録\n            cur.execute('INSERT INTO migrations (migration_name) VALUES (?)', (migration_file,))\n            conn.commit()\n    cur.close()\n    conn.close()\n\napply_migrations()",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781b9a9fbd43c542141e7",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "の内容を記述したら実行してみてください。",
          "href": null
        }
      ]
    },
    "order": 52
  },
  {
    "id": "1ada501ef337815b9ed3f6acd20fd9c3",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "TEST.db",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "の中に以下のように、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルにマイグレーションが記録されていて、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "users",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブルが作成されていれば成功です。",
          "href": null
        }
      ]
    },
    "order": 53
  },
  {
    "id": "1ada501ef33781cea8aad3bc029d625e",
    "type": "callout",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default_background",
      "icon": {
        "type": "external",
        "external": {
          "url": "https://www.notion.so/icons/database_gray.svg"
        }
      },
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "TEST.db",
          "href": null
        }
      ]
    },
    "order": 54
  },
  {
    "id": "1ada501ef337810c830be04bac57f0f6",
    "type": "paragraph",
    "parentId": "1ada501ef33781cea8aad3bc029d625e",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブル",
          "href": null
        }
      ]
    },
    "order": 0
  },
  {
    "id": "1ada501ef33781a7b0d4cd326b986483",
    "type": "image",
    "parentId": "1ada501ef33781cea8aad3bc029d625e",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "parent": [],
      "url": "https://raw.githubusercontent.com/Ryukoku-Horizon/notion2atlas/main/public/assets/1ada501ef33781aca7f5efdaf65ef9e7/1ada501ef33781a7b0d4cd326b986483.png"
    },
    "order": 1
  },
  {
    "id": "1ada501ef3378191b267d4cbbc46c318",
    "type": "paragraph",
    "parentId": "1ada501ef33781cea8aad3bc029d625e",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "users",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "テーブル",
          "href": null
        }
      ]
    },
    "order": 2
  },
  {
    "id": "1ada501ef3378132a6c8e26276aed4f7",
    "type": "image",
    "parentId": "1ada501ef33781cea8aad3bc029d625e",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "parent": [],
      "url": "https://raw.githubusercontent.com/Ryukoku-Horizon/notion2atlas/main/public/assets/1ada501ef33781aca7f5efdaf65ef9e7/1ada501ef3378132a6c8e26276aed4f7.png"
    },
    "order": 3
  },
  {
    "id": "1ada501ef3378102af67dbdd1901ffdc",
    "type": "heading_3",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "is_toggleable": false,
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " 実行される流れ",
          "href": null
        }
      ]
    },
    "order": 55
  },
  {
    "id": "1ada501ef33781dc82b0e1648adba62e",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "最初に ",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "create_migrations_table()",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " を実行して ",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " テーブルを作成します。（既に作成済みの場合は何も処理しません）",
          "href": null
        }
      ]
    },
    "order": 56
  },
  {
    "id": "1ada501ef3378188b233f340271f5b6c",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "次に、まだ適用されていないマイグレーションが順番に実行されます。",
          "href": null
        }
      ]
    },
    "order": 57
  },
  {
    "id": "1ada501ef33781d7979deaa4a0d855f7",
    "type": "numbered_list_item",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "最後に、",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "migrations",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": " テーブルにその履歴が保存されます。",
          "href": null
        }
      ]
    },
    "order": 58
  },
  {
    "id": "1ada501ef33781d687ffef374f7dd536",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "これで、マイグレーションできる仕組みが完成しました。",
          "href": null
        }
      ]
    },
    "order": 59
  },
  {
    "id": "1ada501ef3378183a812d251d5a95789",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": [
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "これを使えば、スキーマを変更するマイグレーションファイルを追加して",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": true,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "apply_migrations.py",
          "href": null
        },
        {
          "annotations": {
            "bold": false,
            "code": false,
            "color": "default",
            "italic": false,
            "strikethrough": false,
            "underline": false
          },
          "plain_text": "を実行すると、いつでもデータベースのスキーマを変更できます。",
          "href": null
        }
      ]
    },
    "order": 60
  },
  {
    "id": "1ada501ef3378179864af209461e1602",
    "type": "paragraph",
    "parentId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "curriculumId": "1ada501ef33781e8b251df0f38a0cb23",
    "pageId": "1ada501ef33781aca7f5efdaf65ef9e7",
    "data": {
      "color": "default",
      "parent": []
    },
    "order": 61
  }
]
